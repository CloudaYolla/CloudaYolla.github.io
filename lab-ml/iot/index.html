<!DOCTYPE html>
<html lang="en" class="js csstransforms3d">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="Hugo 0.54.0" />
    <meta name="description" content="">


    <link rel="icon" href="/images/favicon.png" type="image/png">

    <title>Serverless IoT Communication :: AWS Turkey Builders Day</title>

    
    <link href="/css/nucleus.css?1555439488" rel="stylesheet">
    <link href="/css/fontawesome-all.min.css?1555439488" rel="stylesheet">
    <link href="/css/hybrid.css?1555439488" rel="stylesheet">
    <link href="/css/featherlight.min.css?1555439488" rel="stylesheet">
    <link href="/css/perfect-scrollbar.min.css?1555439488" rel="stylesheet">
    <link href="/css/auto-complete.css?1555439488" rel="stylesheet">
    <link href="/css/theme.css?1555439488" rel="stylesheet">
    <link href="/css/hugo-theme.css?1555439488" rel="stylesheet">
    
      <link href="/css/theme-mine.css?1555439488" rel="stylesheet">
    

    <script src="/js/jquery-2.x.min.js?1555439488"></script>

    <style type="text/css">
      :root #header + #content > #left > #rlblock_left{
          display:none !important;
      }
      
    </style>
    
  </head>
  <body class="" data-url="/lab-ml/iot/">
    <nav id="sidebar" class="">



  <div id="header-wrapper">
    <div id="header">
      <a id="logo" href="https://cloudayolla.github.io/">
<svg id="Layer_1" data-name="Layer 1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 30" width="60%" style="padding:20px 0px;"><defs><style>.cls-1{fill:#fff;}.cls-2{fill:#f90;fill-rule:evenodd;}</style></defs><title>AWS-Logo_White-Color</title><path class="cls-1" d="M14.09,10.85a4.7,4.7,0,0,0,.19,1.48,7.73,7.73,0,0,0,.54,1.19.77.77,0,0,1,.12.38.64.64,0,0,1-.32.49l-1,.7a.83.83,0,0,1-.44.15.69.69,0,0,1-.49-.23,3.8,3.8,0,0,1-.6-.77q-.25-.42-.51-1a6.14,6.14,0,0,1-4.89,2.3,4.54,4.54,0,0,1-3.32-1.19,4.27,4.27,0,0,1-1.22-3.2A4.28,4.28,0,0,1,3.61,7.75,6.06,6.06,0,0,1,7.69,6.46a12.47,12.47,0,0,1,1.76.13q.92.13,1.91.36V5.73a3.65,3.65,0,0,0-.79-2.66A3.81,3.81,0,0,0,7.86,2.3a7.71,7.71,0,0,0-1.79.22,12.78,12.78,0,0,0-1.79.57,4.55,4.55,0,0,1-.58.22l-.26,0q-.35,0-.35-.52V2a1.09,1.09,0,0,1,.12-.58,1.2,1.2,0,0,1,.47-.35A10.88,10.88,0,0,1,5.77.32,10.19,10.19,0,0,1,8.36,0a6,6,0,0,1,4.35,1.35,5.49,5.49,0,0,1,1.38,4.09ZM7.34,13.38a5.36,5.36,0,0,0,1.72-.31A3.63,3.63,0,0,0,10.63,12,2.62,2.62,0,0,0,11.19,11a5.63,5.63,0,0,0,.16-1.44v-.7a14.35,14.35,0,0,0-1.53-.28,12.37,12.37,0,0,0-1.56-.1,3.84,3.84,0,0,0-2.47.67A2.34,2.34,0,0,0,5,11a2.35,2.35,0,0,0,.61,1.76A2.4,2.4,0,0,0,7.34,13.38Zm13.35,1.8a1,1,0,0,1-.64-.16,1.3,1.3,0,0,1-.35-.65L15.81,1.51a3,3,0,0,1-.15-.67.36.36,0,0,1,.41-.41H17.7a1,1,0,0,1,.65.16,1.4,1.4,0,0,1,.33.65l2.79,11,2.59-11A1.17,1.17,0,0,1,24.39.6a1.1,1.1,0,0,1,.67-.16H26.4a1.1,1.1,0,0,1,.67.16,1.17,1.17,0,0,1,.32.65L30,12.39,32.88,1.25A1.39,1.39,0,0,1,33.22.6a1,1,0,0,1,.65-.16h1.54a.36.36,0,0,1,.41.41,1.36,1.36,0,0,1,0,.26,3.64,3.64,0,0,1-.12.41l-4,12.86a1.3,1.3,0,0,1-.35.65,1,1,0,0,1-.64.16H29.25a1,1,0,0,1-.67-.17,1.26,1.26,0,0,1-.32-.67L25.67,3.64,23.11,14.34a1.26,1.26,0,0,1-.32.67,1,1,0,0,1-.67.17Zm21.36.44a11.28,11.28,0,0,1-2.56-.29,7.44,7.44,0,0,1-1.92-.67,1,1,0,0,1-.61-.93v-.84q0-.52.38-.52a.9.9,0,0,1,.31.06l.42.17a8.77,8.77,0,0,0,1.83.58,9.78,9.78,0,0,0,2,.2,4.48,4.48,0,0,0,2.43-.55,1.76,1.76,0,0,0,.86-1.57,1.61,1.61,0,0,0-.45-1.16A4.29,4.29,0,0,0,43,9.22l-2.41-.76A5.15,5.15,0,0,1,38,6.78a3.94,3.94,0,0,1-.83-2.41,3.7,3.7,0,0,1,.45-1.85,4.47,4.47,0,0,1,1.19-1.37A5.27,5.27,0,0,1,40.51.29,7.4,7.4,0,0,1,42.6,0a8.87,8.87,0,0,1,1.12.07q.57.07,1.08.19t.95.26a4.27,4.27,0,0,1,.7.29,1.59,1.59,0,0,1,.49.41.94.94,0,0,1,.15.55v.79q0,.52-.38.52a1.76,1.76,0,0,1-.64-.2,7.74,7.74,0,0,0-3.2-.64,4.37,4.37,0,0,0-2.21.47,1.6,1.6,0,0,0-.79,1.48,1.58,1.58,0,0,0,.49,1.18,4.94,4.94,0,0,0,1.83.92L44.55,7a5.08,5.08,0,0,1,2.57,1.6A3.76,3.76,0,0,1,47.9,11a4.21,4.21,0,0,1-.44,1.93,4.4,4.4,0,0,1-1.21,1.47,5.43,5.43,0,0,1-1.85.93A8.25,8.25,0,0,1,42.05,15.62Z"></path><path class="cls-2" d="M45.19,23.81C39.72,27.85,31.78,30,25,30A36.64,36.64,0,0,1,.22,20.57c-.51-.46-.06-1.09.56-.74A49.78,49.78,0,0,0,25.53,26.4,49.23,49.23,0,0,0,44.4,22.53C45.32,22.14,46.1,23.14,45.19,23.81Z"></path><path class="cls-2" d="M47.47,21.21c-.7-.9-4.63-.42-6.39-.21-.53.06-.62-.4-.14-.74,3.13-2.2,8.27-1.57,8.86-.83s-.16,5.89-3.09,8.35c-.45.38-.88.18-.68-.32C46.69,25.8,48.17,22.11,47.47,21.21Z"></path></svg>
</a>

    </div>
    
        <div class="searchbox">
    <label for="search-by"><i class="fas fa-search"></i></label>
    <input data-search-input id="search-by" type="search" placeholder="Search...">
    <span data-search-clear=""><i class="fas fa-times"></i></span>
</div>

<script type="text/javascript" src="/js/lunr.min.js?1555439488"></script>
<script type="text/javascript" src="/js/auto-complete.js?1555439488"></script>
<script type="text/javascript">
    
        var baseurl = "https:\/\/cloudayolla.github.io\/";
    
</script>
<script type="text/javascript" src="/js/search.js?1555439488"></script>

    
  </div>

    <div class="highlightable">
    <ul class="topics">

        
          
          


 
  
    
    <li data-nav-id="/overview/" title="Overview" class="dd-item 
        
        
        
        ">
      <a href="/overview/">
          <b>- </b>Overview
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/overview/prerequisites/" title="Prerequisites" class="dd-item ">
        <a href="/overview/prerequisites/">
        Prerequisites
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/overview/costs/" title="Expected Costs" class="dd-item ">
        <a href="/overview/costs/">
        Expected Costs
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/overview/cleanup/" title="Cleaning up Resources You&#39;ve Created" class="dd-item ">
        <a href="/overview/cleanup/">
        Cleaning up Resources You&#39;ve Created
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/lab-foundations/" title="Lab Module 1: Foundation Services" class="dd-item 
        
        
        
        ">
      <a href="/lab-foundations/">
          <b>- </b>Lab Module 1: Foundation Services
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/lab-foundations/serverless-static-site/" title="Hosting a Global Static Website without Servers" class="dd-item ">
        <a href="/lab-foundations/serverless-static-site/">
        Hosting a Global Static Website without Servers
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/lab-foundations/virtual-dc-and-server/" title="Creating a Virtual DC and placing a Cloud Server" class="dd-item ">
        <a href="/lab-foundations/virtual-dc-and-server/">
        Creating a Virtual DC and placing a Cloud Server
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/lab-foundations/managed-sql-db/" title="Create a MySQL Relational DB in minutes" class="dd-item ">
        <a href="/lab-foundations/managed-sql-db/">
        Create a MySQL Relational DB in minutes
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/lab-foundations/managed-nosql-db/" title="Create a NoSQL DB in minutes" class="dd-item ">
        <a href="/lab-foundations/managed-nosql-db/">
        Create a NoSQL DB in minutes
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/lab-wa/" title="Lab Module 2: Designing Scalable, Cost Optimized Solutions" class="dd-item 
        
        
        
        ">
      <a href="/lab-wa/">
          <b>- </b>Lab Module 2: Designing Scalable, Cost Optimized Solutions
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/lab-wa/ci-cd-eb/" title="Developing and Deploying Applications" class="dd-item ">
        <a href="/lab-wa/ci-cd-eb/">
        Developing and Deploying Applications
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/lab-wa/asg-lb-eb/" title="Deploying a Scalable Web Application to Production" class="dd-item ">
        <a href="/lab-wa/asg-lb-eb/">
        Deploying a Scalable Web Application to Production
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/lab-wa/costmon/" title="Cost Explorer for understanding and managing costs" class="dd-item ">
        <a href="/lab-wa/costmon/">
        Cost Explorer for understanding and managing costs
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/lab-ml/" title="Lab Module 4: Machine Learning in Practice" class="dd-item 
        parent
        
        
        ">
      <a href="/lab-ml/">
          <b>- </b>Lab Module 4: Machine Learning in Practice
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/lab-ml/iot/" title="Serverless IoT Communication" class="dd-item active">
        <a href="/lab-ml/iot/">
        Serverless IoT Communication
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/lab-ml/ml/" title="ML for Neural Networks based Handwriting Recognition" class="dd-item ">
        <a href="/lab-ml/ml/">
        ML for Neural Networks based Handwriting Recognition
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
         
    </ul>

    
    
      <section id="shortcuts">
        <h3>More</h3>
        <ul>
          
              <li> 
                  <a class="padding" href="https://aws.amazon.com/free/"><i class='fas fa-bookmark'></i> Amazon Free Tier</a>
              </li>
          
              <li> 
                  <a class="padding" href="https://cloudayolla.github.io/authors.md"><i class='fas fa-users'></i> Authors</a>
              </li>
          
        </ul>
      </section>
    

    
    <section id="footer">
      <p>Built with <a href="https://github.com/matcornic/hugo-theme-learn"><i class="fas fa-heart"></i></a> from <a href="http://getgrav.org">Grav</a> and <a href="http://gohugo.io/">Hugo</a></p>

    </section>
  </div>
</nav>





        <section id="body">
        <div id="overlay"></div>
        <div class="padding highlightable">
              
              <div>
                <div id="top-bar">
                
                
                <div id="breadcrumbs" itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb">
                    <span id="sidebar-toggle-span">
                        <a href="#" id="sidebar-toggle" data-sidebar-toggle="">
                          <i class="fas fa-bars"></i>
                        </a>
                    </span>
                  
                  <span id="toc-menu"><i class="fas fa-list-alt"></i></span>
                  
                  <span class="links">
                 
                 
                    
          
          
            
            
          
          
            
            
          
          
            <a href='/'>Overview</a> > <a href='/lab-ml/'>Lab Module 4: Machine Learning in Practice</a> > Serverless IoT Communication
          
         
          
         
          
        
                 
                  </span>
                </div>
                
                    <div class="progress">
    <div class="wrapper">
<nav id="TableOfContents">
<ul>
<li>
<ul>
<li><a href="#objectives">Objectives</a></li>
<li><a href="#services-used-in-this-lab">Services Used in this Lab:</a></li>
<li><a href="#concepts-used-in-the-lab">Concepts Used in the lab</a></li>
<li><a href="#lab-prerequisites">Lab Prerequisites</a></li>
<li><a href="#expected-costs">Expected Costs</a></li>
<li><a href="#lab-steps">Lab Steps</a></li>
<li><a href="#summary">Summary</a></li>
<li><a href="#deleting-lab-resources">Deleting Lab Resources</a></li>
</ul></li>
</ul>
</nav>
    </div>
</div>

                
              </div>
            </div>
            
        <div id="head-tags">
        
        </div>
        
        <div id="body-inner">
          
            <h1>
              
              Serverless IoT Communication
            </h1>
          

        





<h2 id="objectives">Objectives</h2>

<p>Create an IoT thing and start communicating with it.</p>

<h2 id="services-used-in-this-lab">Services Used in this Lab:</h2>

<ul>
<li><em>AWS IoT Core</em> is a managed cloud service that lets connected devices easily and securely interact with cloud applications and other devices. AWS IoT Core can support billions of devices and trillions of messages, and can process and route those messages to AWS endpoints and to other devices reliably and securely. With AWS IoT Core, your applications can keep track of and communicate with all your devices, all the time, even when they aren’t connected.</li>
</ul>

<h2 id="concepts-used-in-the-lab">Concepts Used in the lab</h2>

<ul>
<li><p><em>Message Broker</em> – Acts as a front door for your device to the AWS Cloud. The message broker exposes publish-and-subscribe messaging capabilities available for use by devices through transport protocols like MQTT, HTTP, and WebSocket.</p></li>

<li><p><em>Rules Engine</em> – This is the point closest to the front door where your solution can make decisions about a device’s messages (for example, message filtering, routing messages to other services, and even a direct processing of messages in your solution). We will explore the facets of the rules engine in later posts.</p></li>

<li><p><em>Device Shadow</em> – Sometimes referred to as a thing shadow, this is a logical representation of a physical device’s reported state or desired future state. Although the concept is a bit abstract, this building block provides a huge benefit for customers who build web- or mobile-based applications that need to interact with real devices at any scale. In later posts, we will explore the ways in which the device shadow is used in these interactions.</p></li>

<li><p><em>AWS APIs and the AWS Management Console</em> – These are the mechanisms used to provision every AWS service. This post and all others in this series will include interaction with AWS through the APIs and AWS Management Console. In all Bites of IoT posts we assume you have an IAM user with developer-level permissions in an AWS account.</p></li>
</ul>

<p>So the relationships between these building blocks is:
- AWS IoT has a message broker, rules engine, and device shadows.
- AWS IoT is a part of the AWS Cloud.</p>

<h2 id="lab-prerequisites">Lab Prerequisites</h2>

<p>None.</p>

<h2 id="expected-costs">Expected Costs</h2>

<p>The IoT Core service is free tier eligible.</p>

<h2 id="lab-steps">Lab Steps</h2>

<ol>
<li>Make sure you are in the region you&rsquo;ve been working so far (e.g. Ireland region).</li>
<li>Open the Amazon IoT Core service.</li>
<li>Click <code>Learn</code> from the bottom left corner of the page.</li>

<li><p>Select <code>See How AWS IoT Works</code> tutorial and watch the tutorial.</p>

<p><img src="/images/labml/iot1iot1.png" alt="EB" /></p></li>

<li><p>From the same page, this time select <code>Connect to AWS IoT</code> and click <code>Get Started</code></p></li>

<li><p>Select <code>Configuring a Device</code>.</p></li>

<li><p>Select <code>Linux</code> and <code>Python</code></p>

<p><img src="/images/labml/iot1iot2.png" alt="EB" /></p></li>

<li><p>Register a thing with a name (e.g. <code>cbd_smart_device</code>)</p>

<p><img src="/images/labml/iot1iot3.png" alt="EB" /></p></li>

<li><p>Based on the configuration a zip file will be generated (that is capable of running aws-iot-samples in github on a Linux platform via Pyhton. Download the file to your laptop</p>

<p><img src="/images/labml/iot1iot5.png" alt="EB" /></p></li>

<li><p>Now upload it to your Cloud9 IDE (Open Cloud9, from the manu, select <code>File -&gt; Upload a local file</code>)</p>

<p><img src="/images/labml/iot1iot6.png" alt="EB" /></p></li>

<li><p>Go to the terminal tab of Cloud9 and create a folder called <code>iot-kit</code> and then move the zip file you downloaded to here:</p>

<pre><code>```sh
    cd ~/
    mkdir iot-kit
    mv &lt;path-to&gt;/connect_dev_package.zip .
```
</code></pre></li>

<li><p>As described in the instructions in the IoT Core page, unzip it, check what&rsquo;s inside, make the shell script executable and start the program (The author had a permission issue and therefore used the sudo command. You may want to check running ithout sudo as well)</p>

<pre><code>```sh
    unzip connect_dev_package.zip

    chmod a+z start.sh
    sudo ./start.sh
```
</code></pre></li>

<li><p>The program installs the iot-samples from aws-labs at github: <a href="https://github.com/aws/aws-iot-device-sdk-python">https://github.com/aws/aws-iot-device-sdk-python</a> , downloads the certificates for securely communicating with IoT Core over MQTT.</p>

<p><img src="/images/labml/iot1iot7.png" alt="EB" /></p></li>

<li><p>The default program publishes<code>to a topic</code>sdk/test/Python` a message like below:</p>

<pre><code>    {&quot;message&quot;: &quot;Hello World!&quot;, &quot;sequence&quot;: 228}
</code></pre></li>

<li><p>Now go to the AWS IoT console. Select <code>Test</code> from the bottom left menu.</p></li>

<li><p>Select <code>subscribe to a topic</code> and enter <code>sdk/test/Python</code> in topic name. You should be seeing the messages received by the IoT Core.</p>

<p><img src="/images/labml/iot1iot8.png" alt="EB" /></p></li>
</ol>

<h2 id="summary">Summary</h2>

<p>Congratulations! You&rsquo;ve created a secure, scalable and serverless IoT communication between a simulated device and IoT Core. You can now take real-time action, do analytics, machine learning on the data ingested from billions of devices.</p>

<h2 id="deleting-lab-resources">Deleting Lab Resources</h2>

<p>Delete your IoT thing at the end of the lab.</p>


<footer class=" footline" >
	
</footer>


        
        </div> 
        

      </div>

    <div id="navigation">
        
        
        
        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
            
        
        
        


	 
	 
		
			<a class="nav nav-prev" href="/lab-ml/" title="Lab Module 4: Machine Learning in Practice"> <i class="fa fa-chevron-left"></i></a>
		
		
			<a class="nav nav-next" href="/lab-ml/ml/" title="ML for Neural Networks based Handwriting Recognition" style="margin-right: 0px;"><i class="fa fa-chevron-right"></i></a>
		
	
    </div>

    </section>
    
    <div style="left: -1000px; overflow: scroll; position: absolute; top: -1000px; border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;">
      <div style="border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;"></div>
    </div>
    <script src="/js/clipboard.min.js?1555439488"></script>
    <script src="/js/perfect-scrollbar.min.js?1555439488"></script>
    <script src="/js/perfect-scrollbar.jquery.min.js?1555439488"></script>
    <script src="/js/jquery.sticky.js?1555439488"></script>
    <script src="/js/featherlight.min.js?1555439488"></script>
    <script src="/js/html5shiv-printshiv.min.js?1555439488"></script>
    <script src="/js/highlight.pack.js?1555439488"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script src="/js/modernizr.custom.71422.js?1555439488"></script>
    <script src="/js/learn.js?1555439488"></script>
    <script src="/js/hugo-learn.js?1555439488"></script>

    <link href="/mermaid/mermaid.css?1555439488" type="text/css" rel="stylesheet" />
    <script src="/mermaid/mermaid.js?1555439488"></script>
    <script>
        mermaid.initialize({ startOnLoad: true });
    </script>
    

  </body>
</html>

